{"filter":false,"title":"message_board.php","tooltip":"/message_board.php","undoManager":{"mark":7,"position":7,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":43,"column":8},"action":"remove","lines":["<table id=\"table_header\">","\t<tr>","\t\t<th id =\"header1\">From</th>","\t\t<th id =\"header2\">Subject</th>","\t\t<th id =\"header3\">Body</th>","\t</tr>","","<?php","\t$con=mysql_connect(\"0.0.0.0\",","\"jackson12\");","\tif (!$con) {","\t\techo \"Connection failed\";","\t\treturn false;","\t}","\tif(isset($_COOKIE['username'])){","\t\t$current_user = $_COOKIE['username'];","\t\t$useridquery =  \"SELECT id FROM user WHERE username = '$current_user'\";","\t\t$userres = mysqli_query($con,$useridquery);","\t\twhile($row=mysqli_fetch_array($userres)){","\t\t\t$userid= $row['id'];","\t\t","\t\t}","\t\t","\t\t$messagestring=\"SELECT * from message where recipient_ids = \".$userid.\";\";","\t\t$messagequery = mysqli_query($con,$messagestring);","\t\twhile($row2=mysqli_fetch_array($messagequery)){","\t\t    $senderid= $row2['user_id'];","\t\t    ","\t\t    $senderstring =  \"SELECT username FROM user WHERE id = '$senderid'\";","\t\t    $senderquery = mysqli_query($con,$senderstring);","\t\t    while($row3=mysqli_fetch_array($senderquery)){","\t\t        $sender_username= $row3['username'];","\t\t    }","\t\t\techo '<tr onclick=\"read();\">';","\t\t\techo \"<td>\".$sender_username.\"</td>\";","\t\t\techo \"<td>\".$row2['subject'].\"</td>\";","\t\t\techo \"<td>\".$row2['body'].\"</td>\";","\t\t\techo \"</tr>\";","\t\t}","\t}else{","\t    echo \"Not logged in\";","\t}","?>","</table>"]},{"start":{"row":0,"column":0},"end":{"row":45,"column":7},"action":"insert","lines":["<!DOCTYPE html>","<html >","\t<?php session_start();?>","\t<head>","\t\t<title> Cheapo Mail |","\t\t<?php\techo $_SESSION['Name'];?> ","\t\t</title>","\t\t<meta http-equiv=\"Content-type\" content=\"text/html;charset=ISO-8859-1\" />","\t\t<script src= 'messages_b.js' type='text/javascript'></script>","\t\t<script src='//ajax.googleapis.com/ajax/libs/prototype/1.7.1.0/prototype.js' type='text/javascript'></script>"," \t\t<link rel=\"stylesheet\" type=\"text/css\" href=\"message_board.css\" />","","\t</head>","","\t<body id=\"container\">","","\t\t<div>","","\t\t\t<div id=\"header\">","\t\t\t\t<h1 >CheapoMail</h1>","\t\t\t</div>","","\t\t\t<div id=\"menu\">","\t\t\t\t<h4><a id='compose' href=\"#\">Compose</a></h4>","\t\t\t\t<h4><a href=\"message_board.php\">Inbox</a></h4>","","\t\t\t<?php\t//Capability of registering should only be accessible by the admin user ","\t\t\t\tif($_SESSION['Username'] == 'admin')","\t\t\t\t{","\t\t\t\t\techo '<h4><a href=\"register.php\">Register</a></h4>';","\t\t\t\t}","\t\t\t?>","\t\t\t\t<h4><a href='action.php?a=logout'>Logout</a></h4><!-- Sends request for logout control sequence to be run -->","\t\t\t\t<span id='id'><?php echo $_SESSION['ID'];?></span>","\t\t\t</div>","","\t\t\t<div id=\"content\">","\t\t\tNo New Messages ","\t\t\t</div>","","\t\t\t<div id=\"footer\">","\t\t\tCopyright © Nardo Caryl Danuel</div>","","\t\t</div>","\t</body>","</html>"]}]}],[{"group":"doc","deltas":[{"start":{"row":32,"column":17},"end":{"row":32,"column":27},"action":"remove","lines":["action.php"]},{"start":{"row":32,"column":17},"end":{"row":32,"column":27},"action":"insert","lines":["cheapo.php"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":3},"end":{"row":42,"column":0},"action":"remove","lines":["<div id=\"footer\">","\t\t\tCopyright © Nardo Caryl Danuel</div>",""]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":2},"end":{"row":40,"column":3},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":1},"end":{"row":40,"column":2},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":40,"column":0},"end":{"row":40,"column":1},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":39,"column":0},"end":{"row":40,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":38,"column":9},"end":{"row":39,"column":0},"action":"remove","lines":["",""]}]}]]},"ace":{"folds":[],"scrolltop":385,"scrollleft":0,"selection":{"start":{"row":38,"column":9},"end":{"row":38,"column":9},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":144,"mode":"ace/mode/php"}},"timestamp":1418441335740,"hash":"1f81978482b1d77bba9729d43398b83112c3c05d"}